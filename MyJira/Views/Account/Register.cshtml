@model MyJira.Services.ViewModel.RegisterViewModel

<h2>Регистрация</h2>
<form asp-action="Register" method="post">
    <div>
        <label>Логин</label>
        <input asp-for="UserName" class="form-control" />
    </div>
    <div>
        <label>Полное имя</label>
        <input asp-for="FullName" class="form-control" />
    </div>
    <div>
        <label>Email</label>
        <input asp-for="Email" class="form-control" />
    </div>
    <div>
        <label>Пароль</label>
        <input asp-for="Password" type="password" class="form-control" />
    </div>
    <button type="submit" class="btn btn-primary mt-2">Зарегистрироваться</button>
</form>

<script>
    document.getElementById("registerForm").addEventListener("submit", async (e) => {
        e.preventDefault(); 

        const formData = new FormData(e.target);
        const data = Object.fromEntries(formData.entries());

        const response = await fetch("/Account/Register", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data)
        });

        if (response.ok) {
            alert("Регистрация прошла успешно!");
            window.location.href = "/Project/Index";
        } else {
           
            const error = await response.text();
            alert("Ошибка регистрации: " + error);
        }
    });
</script>